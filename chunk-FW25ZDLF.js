import{a as G,b as _,c as L,d as R,e as V,f as g,h as P,i as H,j as U,n as z,o as Z}from"./chunk-JOFQLKKD.js";import{L as j,M as q,O as A,Q as k,R as B,a as D,g as N}from"./chunk-YSJNSMYB.js";import{Gb as l,Pb as x,Sa as d,Ta as y,V as h,Y as I,ba as b,db as S,ha as E,jb as u,lb as a,lc as T,p as C,pb as o,pc as M,qb as i,rb as v,v as w,xb as O,yb as F}from"./chunk-BEANJWLH.js";var J=(()=>{class t{constructor(e){this.httpClient=e,this.owners=S([]),this.reloadOwners().subscribe()}getOwners(){return C([{id:1,nom:"Isnard",prenom:"Achil",numero:"0761989794",mail:"achil.isnard@ph.com"},{id:2,nom:"Isnard",prenom:"Zo\xE9",numero:"0799999794",mail:"zoe.isnard@ph.com"}])}reloadOwners(){return this.getOwners().pipe(h(e=>this.owners.set(e)))}findOwnerById(e){return C({id:1,nom:"Isnard",prenom:"Achil",numero:"0761989794",mail:"achil.isnard@ph.com"})}deleteOwnerById(e){return this.httpClient.request("DELETE","/owner/"+e).pipe(w(()=>this.reloadOwners()))}editOwnerById(e,n){return this.httpClient.request("PATCH","/owner/"+e,{body:n}).pipe(w(()=>this.reloadOwners()))}createOwner(e){let n={};return this.httpClient.request("POST","/owner",{body:n}).pipe(w(()=>this.reloadOwners()))}static{this.\u0275fac=function(n){return new(n||t)(b(D))}}static{this.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function W(t,p){t&1&&(o(0,"div"),l(1,"Le nom est obligatoire"),i())}function X(t,p){if(t&1&&(o(0,"div",16),u(1,W,2,0,"div",17),i()),t&2){let e,n=F();d(),a("ngIf",(e=n.myForm.get("nom"))==null||e.errors==null?null:e.errors.required)}}function Y(t,p){t&1&&(o(0,"div"),l(1,"Le pr\xE9nom est obligatoire"),i())}function $(t,p){if(t&1&&(o(0,"div",16),u(1,Y,2,0,"div",17),i()),t&2){let e,n=F();d(),a("ngIf",(e=n.myForm.get("prenom"))==null||e.errors==null?null:e.errors.required)}}function ee(t,p){t&1&&(o(0,"div"),l(1,"Le num\xE9ro est obligatoire"),i())}function te(t,p){if(t&1&&(o(0,"div",16),u(1,ee,2,0,"div",17),i()),t&2){let e,n=F();d(),a("ngIf",(e=n.myForm.get("numero"))==null||e.errors==null?null:e.errors.required)}}function ne(t,p){t&1&&v(0,"div",16)}function re(t,p){t&1&&(o(0,"div",16),l(1,"Le statut est obligatorie"),i())}var ye=(()=>{class t{constructor(e,n,r,m){this.ownerService=e,this.router=n,this.dialogRef=r,this.data=m,this.myForm=new V({nom:new g("",[_.required]),prenom:new g("",[_.required]),numero:new g("",[_.required]),mail:new g("",[_.required])})}ngOnInit(){this.data?.id&&this.loadOwnerFormById(this.data.id).subscribe()}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}loadOwnerFormById(e){return this.ownerService.findOwnerById(e).pipe(h(n=>{this.myForm.patchValue({nom:n.nom,prenom:n.prenom,numero:n.numero,mail:n.mail})}))}onSubmit(){let e=this.myForm.value;this.myForm.valid?this.ownerService.createOwner(e).subscribe(()=>{this.router.navigate(["/owner"])}):console.log("erreur, formulaire pas valid\xE9")}static{this.\u0275fac=function(n){return new(n||t)(y(J),y(N),y(j),y(q))}}static{this.\u0275cmp=E({type:t,selectors:[["app-owner-form"]],standalone:!0,features:[x],decls:30,vars:6,consts:[[3,"formGroup"],["mat-dialog-title",""],[1,"p-4"],[1,"form-group"],["for","nom"],["type","text","id","nom","formControlName","nom",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","prenom"],["type","text","id","prenom","formControlName","prenom",1,"form-control"],["for","numero"],["type","text","id","numero","formControlName","numero",1,"form-control"],["for","mail"],["type","email","id","mail","formControlName","mail",1,"form-control"],[1,"d-flex","flex-row","justify-content-evenly"],[1,"cancel-button",3,"click"],[1,"d-flex","justify-content-center","align-items-center","btn","btn-success",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(n,r){if(n&1&&(o(0,"form",0)(1,"h4",1),l(2,"Cr\xE9er une propri\xE9taire"),i(),o(3,"div",2)(4,"div",3)(5,"label",4),l(6,"Nom"),i(),v(7,"input",5),u(8,X,2,1,"div",6),i(),o(9,"div",3)(10,"label",7),l(11,"Prenom"),i(),v(12,"input",8),u(13,$,2,1,"div",6),i(),o(14,"div",3)(15,"label",9),l(16,"Num\xE9ro"),i(),v(17,"input",10),u(18,te,2,1,"div",6),i(),o(19,"div",3)(20,"label",11),l(21,"Mail"),i(),v(22,"input",12),u(23,ne,1,0,"div",6)(24,re,2,0,"div",6),i()()(),o(25,"mat-dialog-actions",13)(26,"button",14),O("click",function(){return r.cancel()}),l(27,"Annuler"),i(),o(28,"button",15),O("click",function(){return r.onSubmit()}),l(29," Ajouter un propri\xE9taire "),i()()),n&2){let m,s,c,f;a("formGroup",r.myForm),d(8),a("ngIf",((m=r.myForm.get("nom"))==null?null:m.invalid)&&(((m=r.myForm.get("nom"))==null?null:m.dirty)||((m=r.myForm.get("nom"))==null?null:m.touched))),d(5),a("ngIf",((s=r.myForm.get("prenom"))==null?null:s.invalid)&&(((s=r.myForm.get("prenom"))==null?null:s.dirty)||((s=r.myForm.get("prenom"))==null?null:s.touched))),d(5),a("ngIf",((c=r.myForm.get("numero"))==null?null:c.invalid)&&(((c=r.myForm.get("numero"))==null?null:c.dirty)||((c=r.myForm.get("numero"))==null?null:c.touched))),d(5),a("ngIf",((f=r.myForm.get("mail"))==null?null:f.invalid)&&(((f=r.myForm.get("mail"))==null?null:f.dirty)||((f=r.myForm.get("mail"))==null?null:f.touched))),d(),a("ngIf",r.myForm==null||r.myForm.errors==null?null:r.myForm.errors.required)}},dependencies:[z,P,G,L,R,Z,H,U,M,T,B,A,k],encapsulation:2})}}return t})();export{J as a,ye as b};
