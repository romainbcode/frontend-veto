import{a as R}from"./chunk-Y2GOG3J7.js";import{a as G,b as C,c as H,d as U,e as Z,f as y,h as $,i as W,j as Q,k as z,l as J,m as K,n as X,o as Y}from"./chunk-JTMN6KQK.js";import{L as j,M as L,O as M,Q as B,R as k,a as b,g as q}from"./chunk-DXO5SGBR.js";import{Hb as a,Ib as V,Jb as S,Kb as D,Qb as A,Sa as s,Ta as f,V as u,Y as g,ba as v,db as p,ha as x,jb as h,lb as m,lc as P,mb as w,mc as N,p as c,qb as n,qc as O,rb as o,sb as F,v as l,yb as T,zb as _}from"./chunk-MAGLYOGK.js";var et=(()=>{class e{constructor(t){this.httpClient=t,this.consultations=p([]),this.originalConsultations=p([]),this.typeConsultations=p([]),this.reloadConsultations().subscribe(),this.reloadTypeConsultations().subscribe()}getConsultations(){return c([{id:1,titre:"Dents",date:"08/03/2025",statut:{id:1,libelle:"Termin\xE9"},typeOperation:{id:1,label:"Extraction dentaire",color:"#000",comment:"Arracher des chicots"},animal:{id:1,libelle:"Chien",nom:"Achil"},veterinarian:{id:1,nom:"Isnard",prenom:"Zo\xE9"}},{id:2,titre:"Dents",date:"08/03/2025",statut:{id:2,libelle:"En attente"},typeOperation:{id:2,label:"Dents de sagesse",color:"#000",comment:"Arracher des chicots de sagesse"},animal:{id:2,libelle:"Chat",nom:"Quentin"},veterinarian:{id:2,nom:"Pucholle",prenom:"Alsexy"}},{id:3,titre:"Dents",statut:{id:3,libelle:"Annul\xE9"},date:"08/03/2025",typeOperation:{id:2,label:"Dents de sagesse",color:"#000",comment:"Arracher des chicots de sagesse"},animal:{id:3,libelle:"NAC",nom:"POL"},veterinarian:{id:2,nom:"Pucholle",prenom:"Alsexy"}}])}reloadConsultations(){return this.getConsultations().pipe(u(t=>{this.consultations.set(t),this.originalConsultations.set(t)}))}findConsultationById(t){return c({id:1,titre:"Dents",date:"08/03/2025",statut:{id:1,libelle:"Termin\xE9"},typeOperation:{id:2,label:"Dents de sagesse",color:"#000",comment:"Arracher des chicots de sagesse"},animal:{id:1,libelle:"Chien",nom:"Achil",dateNaissance:"07/03/2024"},veterinarian:{id:1,nom:"Isnard",prenom:"Zo\xE9"}})}findConsultationWithFilter(t){if(!t)return this.consultations.set(this.originalConsultations()),this.consultations();let i=this.originalConsultations().filter(r=>r.nom.toLowerCase().includes(t.toLowerCase())||r.age.toString().includes(t)||r.statut.label.toLowerCase().includes(t.toLowerCase())||r.type.label.toLowerCase().includes(t.toLowerCase()));return this.consultations.set(i),this.consultations()}deleteConsultationById(t){return this.httpClient.request("DELETE","/consultation/"+t).pipe(l(()=>this.reloadConsultations()))}editConsultationById(t,i){return this.httpClient.request("PATCH","/consultation/"+t,{body:i}).pipe(l(()=>this.reloadConsultations()))}createConsultation(t){let i={};return this.httpClient.request("POST","/consultation",{body:i}).pipe(l(()=>this.reloadConsultations()))}completeConsultationById(t){return this.httpClient.request("PUT","/consultation/"+t).pipe(l(()=>this.reloadConsultations()))}findTypeConsultationById(t){return c({id:1,label:"Extraction dentaire",color:"#FFF",comment:"Arracher des chicots"})}createTypeConsultation(t){let i={};return this.httpClient.request("POST","/typeConsultation",{body:i}).pipe(l(()=>this.reloadTypeConsultations()))}getTypeConsultations(){return c([{id:1,label:"Extraction dentaire",color:"#FFF",comment:"Arracher des chicots"},{id:2,label:"Dents de sagesse",color:"#FFF",comment:"Arracher des chicots de sagesse"}])}reloadTypeConsultations(){return this.getTypeConsultations().pipe(u(t=>{this.typeConsultations.set(t)}))}static{this.\u0275fac=function(i){return new(i||e)(v(b))}}static{this.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var it=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-card-type-consultation"]],inputs:{label:"label",color:"color"},standalone:!0,features:[A],decls:2,vars:3,consts:[[1,"d-inline-flex","px-3","py-2","rounded","text-white","fw-bold","text-center"]],template:function(i,r){i&1&&(n(0,"div",0),a(1),o()),i&2&&(w("background-color",r.color),s(),S(" ",r.label,`
`))},encapsulation:2})}}return e})();var nt=(()=>{class e{constructor(t){this.httpClient=t,this.animaux=p([]),this.originalAnimaux=p([]),this.reloadAnimaux().subscribe()}getAnimaux(){return c([{id:1,nom:"Achil",dateNaissance:"07/03/2024",type:{id:1,label:"Chien"},proprietaire:{id:1,nom:"ProprioRomain1",prenom:"PropioPrenom1",email:"test1@gmail.com"}},{id:2,nom:"Quentin",dateNaissance:"04/03/2024",type:{id:3,label:"NAC"},proprietaire:{id:1,nom:"ProprioRomain2",prenom:"PropioPrenom2",email:"test2@gmail.com"}},{id:3,nom:"Nasser",dateNaissance:"07/01/2024",type:{id:2,label:"Chat"},proprietaire:{id:1,nom:"ProprioRomain3",prenom:"PropioPrenom3",email:"test@gmail.com3"}}])}reloadAnimaux(){return this.getAnimaux().pipe(u(t=>{this.animaux.set(t),this.originalAnimaux.set(t)}))}findAnimalById(t){return c({id:1,nom:"Achil",dateNaissance:"07/03/2024",type:{id:1,label:"Chien"},proprietaire:{id:1,nom:"ProprioRomain",prenom:"PropioPrenom",email:"test@gmail.com"}})}findAnimalWithFilter(t){return t?this.animaux():(this.animaux.set(this.originalAnimaux()),this.animaux())}deleteAnimalById(t){return this.httpClient.request("DELETE","/animal/"+t).pipe(l(()=>this.reloadAnimaux()))}editAnimalById(t,i){return this.httpClient.request("PATCH","/animal/"+t,{body:i}).pipe(l(()=>this.reloadAnimaux()))}createAnimal(t){let i={};return this.httpClient.request("POST","/animal",{body:i}).pipe(l(()=>this.reloadAnimaux()))}completeAnimalById(t){return this.httpClient.request("PUT","/animal/"+t).pipe(l(()=>this.reloadAnimaux()))}static{this.\u0275fac=function(i){return new(i||e)(v(b))}}static{this.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ot=(()=>{class e{constructor(t){this.httpClient=t,this.vets=p([]),this.originalVets=p([]),this.reloadVets().subscribe()}getVets(){return c([{id:1,nom:"Isnard",prenom:"Zoe"},{id:2,nom:"Isnard",prenom:"Achil"}])}reloadVets(){return this.getVets().pipe(u(t=>{this.vets.set(t),this.originalVets.set(t)}))}findVetById(t){return c({id:1,nom:"Isnard",prenom:"Zo\xE9"})}deleteVetById(t){return this.httpClient.request("DELETE","/Veterinaire/"+t).pipe(l(()=>this.reloadVets()))}editVetById(t,i){return this.httpClient.request("PATCH","/Veterinaire/"+t,{body:i}).pipe(l(()=>this.reloadVets()))}createVet(t){let i={};return this.httpClient.request("POST","/Veterinaire",{body:i}).pipe(l(()=>this.reloadVets()))}findVetWithFilter(t){if(!t)return this.vets.set(this.originalVets()),this.vets();let i=this.originalVets().filter(r=>r.nom.toLowerCase().includes(t.toLowerCase())||r.prenom.toLowerCase().includes(t.toLowerCase()));return this.vets.set(i),this.vets()}static{this.\u0275fac=function(i){return new(i||e)(v(b))}}static{this.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ct(e,d){e&1&&(n(0,"div",28),a(1,"Le titre est obligatoire"),o())}function pt(e,d){if(e&1&&(n(0,"div"),h(1,ct,2,0,"div",27),o()),e&2){let t=_();s(),m("ngIf",t.titreFc==null||t.titreFc.errors==null?null:t.titreFc.errors.required)}}function ut(e,d){if(e&1&&(n(0,"option",29),a(1),o()),e&2){let t=d.$implicit;m("ngValue",t.id),s(),S(" ",t.nom," ")}}function ht(e,d){if(e&1&&(n(0,"option",29),F(1,"app-card-type-consultation",30),o()),e&2){let t=d.$implicit;m("ngValue",t.id),s(),m("label",t.label)("color",t.color)}}function ft(e,d){if(e&1&&(n(0,"option",29),a(1),o()),e&2){let t=d.$implicit;m("ngValue",t.id),s(),D(" ",t.prenom," ",t.nom," ")}}function Ct(e,d){if(e&1&&(n(0,"option",29),a(1),o()),e&2){let t=d.$implicit;m("ngValue",t.id),s(),V(t.libelle)}}function yt(e,d){e&1&&(n(0,"div",28),a(1,"Le statut est obligatoire"),o())}function gt(e,d){if(e&1&&(n(0,"div"),h(1,yt,2,0,"div",27),o()),e&2){let t=_();s(),m("ngIf",t.statutFc==null||t.statutFc.errors==null?null:t.statutFc.errors.required)}}var Bt=(()=>{class e{constructor(t,i,r,E,rt,at,lt){this.consultationService=t,this.animalService=i,this.veterinarianService=r,this.surgeryService=E,this.router=rt,this.dialogRef=at,this.data=lt,this.myForm=new Z({titre:new y("",[C.required]),statut:new y("",[C.required]),date:new y("",[C.required]),animal:new y("",[C.required]),typeOperation:new y("",[C.required]),veterinarian:new y("",[C.required]),comment:new y("",[C.required])}),this.types=[{id:1,libelle:"Chien"},{id:2,libelle:"Chat"},{id:3,libelle:"NAC"}],this.statuts=[{id:1,libelle:"Termin\xE9"},{id:2,libelle:"En attente"},{id:3,libelle:"Annul\xE9"}]}ngOnInit(){this.data?.id?this.loadPatientFormById(this.data.id).subscribe():this.myForm.patchValue({statut:2})}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}loadPatientFormById(t){return this.consultationService.findConsultationById(t).pipe(u(i=>{this.myForm.patchValue({titre:i.titre,statut:i.statut.id,date:i.date,animal:i.animal.id,typeOperation:i.typeOperation.id,veterinarian:i.veterinarian.id,comment:i.comment})}))}onSubmit(){let t=this.myForm.value;this.myForm.valid?this.consultationService.createConsultation(t).subscribe(()=>{this.router.navigate(["/consultation"])}):console.log("erreur, formulaire pas valid\xE9")}get titreFc(){return this.myForm.get("titre")}get ageFc(){return this.myForm.get("age")}get typeFc(){return this.myForm.get("type")}get statutFc(){return this.myForm.get("statut")}static{this.\u0275fac=function(i){return new(i||e)(f(et),f(nt),f(ot),f(R),f(q),f(j),f(L))}}static{this.\u0275cmp=x({type:e,selectors:[["app-consultation-form"]],standalone:!0,features:[A],decls:58,vars:7,consts:[[3,"formGroup"],["mat-dialog-title",""],[1,"p-4"],[1,"d-flex","flex-row","mb-2"],[1,"form-group","w-50","me-2"],["for","nom"],[2,"color","red"],["type","text","id","titre","formControlName","titre",1,"form-control"],[4,"ngIf"],[1,"form-group","w-50"],["for","age"],["type","date","id","date","formControlName","date",1,"form-control"],["for","animal"],["formControlName","animal",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","typeOperation"],["formControlName","typeOperation",1,"form-select"],["for","veterinarian"],["formControlName","veterinarian",1,"form-select"],["for","statut"],["formControlName","statut",1,"form-select"],[1,"form-group"],["for","comment"],["id","comment","formControlName","comment","rows","3",1,"form-control"],[1,"d-flex","flex-row","justify-content-evenly"],[1,"cancel-button",3,"click"],[1,"d-flex","justify-content-center","align-items-center","btn","btn-success",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[3,"ngValue"],[3,"label","color"]],template:function(i,r){i&1&&(n(0,"form",0)(1,"h4",1),a(2,"Cr\xE9er une consultation"),o(),n(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),a(7,"Titre"),n(8,"span",6),a(9,"*"),o()(),F(10,"input",7),h(11,pt,2,1,"div",8),o(),n(12,"div",9)(13,"label",10),a(14,"Date"),n(15,"span",6),a(16,"*"),o()(),F(17,"input",11),o()(),n(18,"div",3)(19,"div",4)(20,"label",12),a(21,"Animal"),n(22,"span",6),a(23,"*"),o()(),n(24,"select",13),h(25,ut,2,2,"option",14),o()(),n(26,"div",9)(27,"label",15),a(28,"Type d'op\xE9ration"),n(29,"span",6),a(30,"*"),o()(),n(31,"select",16),h(32,ht,2,3,"option",14),o()()(),n(33,"div",3)(34,"div",4)(35,"label",17),a(36,"V\xE9t\xE9rinaire"),n(37,"span",6),a(38,"*"),o()(),n(39,"select",18),h(40,ft,2,3,"option",14),o()(),n(41,"div",9)(42,"label",19),a(43,"Statut"),n(44,"span",6),a(45,"*"),o()(),n(46,"select",20),h(47,Ct,2,2,"option",14),o(),h(48,gt,2,1,"div",8),o()(),n(49,"div",21)(50,"label",22),a(51,"Commentaire"),o(),F(52,"textarea",23),o()()(),n(53,"mat-dialog-actions",24)(54,"button",25),T("click",function(){return r.cancel()}),a(55,"Annuler"),o(),n(56,"button",26),T("click",function(){return r.onSubmit()}),a(57," Ajouter une consultation "),o()()),i&2&&(m("formGroup",r.myForm),s(11),m("ngIf",r.titreFc==null?null:r.titreFc.touched),s(14),m("ngForOf",r.animalService.animaux()),s(7),m("ngForOf",r.consultationService.typeConsultations()),s(8),m("ngForOf",r.veterinarianService.vets()),s(7),m("ngForOf",r.statuts),s(),m("ngIf",r.statutFc==null?null:r.statutFc.touched))},dependencies:[X,$,J,K,G,z,H,U,Y,W,Q,O,P,N,k,M,B,it],encapsulation:2})}}return e})();export{et as a,it as b,nt as c,ot as d,Bt as e};
