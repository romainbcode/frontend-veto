import{a as ee,b as te,c as ie,d as oe,e as ne,f as re,g as me,h as ae,i as ce,j as le,k as se,n as de}from"./chunk-34J2WXNY.js";import{a as Q,b as W,f as Y,g as Z,i as R,j}from"./chunk-J5ZFEIYP.js";import{a as ue,b as y,c as pe,d as fe,e as A,f as _,h as he,i as De,j as Ce,n as V,o as P}from"./chunk-FJRMV74N.js";import{L as I,M as E,N as J,O as K,R as k,a as z,g as M}from"./chunk-4O6QZ7WQ.js";import{Hb as m,Jb as G,Rb as D,Sa as a,Ta as c,V as f,Y as $,ba as U,ca as L,db as X,ha as h,jb as g,lb as l,p as B,pa as F,qa as w,qb as n,rb as r,rc as C,sb as d,tb as S,ub as T,v as x,wb as H,yb as p,zb as b}from"./chunk-CN6GV3UQ.js";var v=(()=>{class t{constructor(e){this.httpClient=e,this.documents=X([]),this.reloadDocuments().subscribe()}getDocuments(){return B([{id:1,titre:"Consignes sorties extraction chien",type:"Consignes Post-Op\xE9ratoire",content:"Content...."},{id:2,titre:"Consignes sorties extraction chat",type:"Consignes Post-Op\xE9ratoire",content:"Content...."}])}reloadDocuments(){return this.getDocuments().pipe(f(e=>this.documents.set(e)))}findDocumentById(e){return B({id:1,titre:"Consignes sorties extraction chien",type:"Consignes Post-Op\xE9ratoire",content:"Content...."})}deleteDocumentById(e){return this.httpClient.request("DELETE","/document/"+e).pipe(x(()=>this.reloadDocuments()))}editDocumentById(e,i){return this.httpClient.request("PATCH","/document/"+e,{body:i}).pipe(x(()=>this.reloadDocuments()))}createDocument(e){let i={};return this.httpClient.request("POST","/document",{body:i}).pipe(x(()=>this.reloadDocuments()))}static{this.\u0275fac=function(i){return new(i||t)(U(z))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var N=(()=>{class t{constructor(e,i,o,s){this.documentService=e,this.router=i,this.dialogRef=o,this.data=s,this.myForm=new A({titre:new _("",[y.required]),type:new _("",[y.required])})}ngOnInit(){this.data?.id&&this.loadDocumentFormById(this.data.id).subscribe()}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}loadDocumentFormById(e){return this.documentService.findDocumentById(e).pipe(f(i=>{this.myForm.patchValue({titre:i.titre,type:i.type})}))}onSubmit(){let e=this.myForm.value;this.myForm.valid?this.documentService.createDocument(e).subscribe(()=>{this.router.navigate(["/document"])}):console.log("erreur, formulaire pas valid\xE9")}get titreFc(){return this.myForm.get("titre")}get typeFc(){return this.myForm.get("type")}static{this.\u0275fac=function(i){return new(i||t)(c(v),c(M),c(I),c(E))}}static{this.\u0275cmp=h({type:t,selectors:[["app-document-form"]],standalone:!0,features:[D],decls:2,vars:0,template:function(i,o){i&1&&(n(0,"p"),m(1,"document-form works!"),r())},dependencies:[V,P,C,k],encapsulation:2})}}return t})();var ye=(()=>{class t{constructor(e,i,o){this.documentService=e,this.dialogRef=i,this.data=o,this.faXmark=Z,this.myForm=new A({titre:new _("",[y.required]),type:new _("",[y.required])})}ngOnInit(){this.loadDocumentFormById(this.data.id).subscribe()}loadDocumentFormById(e){return this.documentService.findDocumentById(e).pipe(f(i=>{this.myForm.patchValue({titre:i.titre,type:i.type,infosComp:""}),this.myForm.disable(),this.myForm.get("infosComp")?.enable()}))}close(){this.dialogRef.close(!1)}static{this.\u0275fac=function(i){return new(i||t)(c(v),c(I),c(E))}}static{this.\u0275cmp=h({type:t,selectors:[["app-document-fiche"]],standalone:!0,features:[D],decls:17,vars:2,consts:[[3,"formGroup"],[1,"d-flex","justify-content-between","align-items-center"],["mat-dialog-title",""],[1,"btn",3,"click"],[1,"me-2",3,"icon"],[1,"px-4","pb-4"],[1,"d-flex","flex-row"],[1,"d-flex","flex-column","justify-content-center"],[1,"form-group","me-2"],["type","text","id","titre","formControlName","titre",1,"form-control"],[1,"form-group"],["for","statut"],["type","text","id","infosComp","formControlName","infosComp",1,"form-control"]],template:function(i,o){i&1&&(n(0,"form",0)(1,"div",1)(2,"h4",2),m(3,"D\xE9tails du document"),r(),n(4,"button",3),p("click",function(){return o.close()}),d(5,"fa-icon",4),r()(),n(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label"),m(11,"Titre"),r(),d(12,"input",9),r()()(),n(13,"div",10)(14,"label",11),m(15,"Informations compl\xE9mentaires"),r(),d(16,"input",12),r()()()),i&2&&(l("formGroup",o.myForm),a(5),l("icon",o.faXmark))},dependencies:[V,he,ue,pe,fe,P,De,Ce,C,k,K,j,R],encapsulation:2})}}return t})();function xe(t,u){t&1&&(n(0,"th",13),m(1,"Titre"),r())}function Fe(t,u){if(t&1&&(n(0,"td",14),m(1),r()),t&2){let e=u.$implicit;a(),G(" ",e.titre,"")}}function we(t,u){t&1&&(n(0,"th",13),m(1,"Type"),r())}function Se(t,u){if(t&1&&(n(0,"td",14),m(1),r()),t&2){let e=u.$implicit;a(),G(" ",e.type,"")}}function Te(t,u){t&1&&(n(0,"th",13),m(1,"Actions"),r())}function Me(t,u){if(t&1){let e=H();n(0,"td",14)(1,"button",15),p("click",function(o){let s=F(e).$implicit;return b().deleteDocument(s.id),w(o.stopPropagation())}),d(2,"fa-icon",16),r(),n(3,"button",17),p("click",function(o){let s=F(e).$implicit;return b().editDocument(s.id),w(o.stopPropagation())}),d(4,"fa-icon",16),r()()}if(t&2){let e=b();a(2),l("icon",e.faTrash),a(2),l("icon",e.faEdit)}}function Ie(t,u){t&1&&d(0,"tr",18)}function Ee(t,u){if(t&1){let e=H();n(0,"tr",19),p("click",function(){let o=F(e).$implicit,s=b();return w(s.showDocument(o.id))}),r()}}var rt=(()=>{class t{constructor(e,i){this.documentService=e,this.router=i,this.dialog=L(J),this.faTrash=W,this.faEdit=Q,this.faPlus=Y,this.displayedColumns=["Titre","Type","Actions"]}deleteDocument(e){this.dialog.open(de,{width:"500px"}).afterClosed().subscribe(o=>{o&&this.documentService.deleteDocumentById(e).subscribe()})}createTypeDocument(){}createDocument(){this.dialog.open(N,{width:"500px"})}editDocument(e){this.dialog.open(N,{width:"500px",data:{id:e}})}showDocument(e){this.dialog.open(ye,{width:"500px",data:{id:e}})}static{this.\u0275fac=function(i){return new(i||t)(c(v),c(M))}}static{this.\u0275cmp=h({type:t,selectors:[["app-document"]],standalone:!0,features:[D],decls:22,vars:5,consts:[[1,"p-3"],[1,"d-flex","justify-content-end","align-items-center"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"me-2",3,"icon"],[1,"btn","btn-dark",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","Titre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Type"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"btn","btn-danger",3,"click"],[2,"color","white",3,"icon"],[1,"btn","btn-primary",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return o.createTypeDocument()}),d(3,"fa-icon",3),n(4,"span"),m(5,"Ajouter un type de consultation"),r()(),n(6,"button",4),p("click",function(){return o.createDocument()}),d(7,"fa-icon",3),n(8,"span"),m(9,"Ajouter un document"),r()()(),n(10,"table",5),S(11,6),g(12,xe,2,0,"th",7)(13,Fe,2,1,"td",8),T(),S(14,9),g(15,we,2,0,"th",7)(16,Se,2,1,"td",8),T(),S(17,10),g(18,Te,2,0,"th",7)(19,Me,5,2,"td",8),T(),g(20,Ie,1,0,"tr",11)(21,Ee,1,0,"tr",12),r()()),i&2&&(a(3),l("icon",o.faPlus),a(4),l("icon",o.faPlus),a(3),l("dataSource",o.documentService.documents()),a(10),l("matHeaderRowDef",o.displayedColumns),a(),l("matRowDefColumns",o.displayedColumns))},dependencies:[se,ee,ie,me,oe,te,ae,ne,re,ce,le,C,j,R],encapsulation:2})}}return t})();export{rt as DocumentComponent};
