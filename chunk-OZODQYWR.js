import{a as B}from"./chunk-LVCSY2Q2.js";import{a as Y,b as tt}from"./chunk-VTESOPR3.js";import{a as X}from"./chunk-AQOOQAVY.js";import{a as G,b as d,c as R,d as P,e as $,f as u,h as H,i as U,j as Z,k as W,l as z,m as J,n as K,o as Q}from"./chunk-6XM4JLLI.js";import{L as D,M,O as q,Q as L,R as k,a as A,g as j}from"./chunk-LCZBXWVK.js";import{Hb as r,Ib as E,Jb as V,Kb as I,Rb as T,Sa as m,Ta as p,V as g,Y as _,ba as b,db as y,ha as x,jb as c,lb as l,nc as w,oc as N,p as h,qb as i,rb as n,sb as f,sc as O,v,yb as F,zb as S}from"./chunk-6ZEQ7G7Q.js";var et=(()=>{class e{constructor(t){this.httpClient=t,this.vets=y([]),this.originalVets=y([]),this.reloadVets().subscribe()}getVets(){return h([{id:1,nom:"Isnard",prenom:"Zoe"},{id:2,nom:"Isnard",prenom:"Achil"}])}reloadVets(){return this.getVets().pipe(g(t=>{this.vets.set(t),this.originalVets.set(t)}))}findVetById(t){return h({id:1,nom:"Isnard",prenom:"Zo\xE9"})}deleteVetById(t){return this.httpClient.request("DELETE","/Veterinaire/"+t).pipe(v(()=>this.reloadVets()))}editVetById(t,o){return this.httpClient.request("PATCH","/Veterinaire/"+t,{body:o}).pipe(v(()=>this.reloadVets()))}createVet(t){let o={};return this.httpClient.request("POST","/Veterinaire",{body:o}).pipe(v(()=>this.reloadVets()))}findVetWithFilter(t){if(!t)return this.vets.set(this.originalVets()),this.vets();let o=this.originalVets().filter(a=>a.nom.toLowerCase().includes(t.toLowerCase())||a.prenom.toLowerCase().includes(t.toLowerCase()));return this.vets.set(o),this.vets()}static{this.\u0275fac=function(o){return new(o||e)(b(A))}}static{this.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function lt(e,s){e&1&&(i(0,"div",28),r(1,"Le titre est obligatoire"),n())}function mt(e,s){if(e&1&&(i(0,"div"),c(1,lt,2,0,"div",27),n()),e&2){let t=S();m(),l("ngIf",t.titreFc==null||t.titreFc.errors==null?null:t.titreFc.errors.required)}}function st(e,s){if(e&1&&(i(0,"option",29),r(1),n()),e&2){let t=s.$implicit;l("ngValue",t.id),m(),V(" ",t.nom," ")}}function ct(e,s){if(e&1&&(i(0,"option",29),f(1,"app-card-type-consultation",30),n()),e&2){let t=s.$implicit;l("ngValue",t.id),m(),l("label",t.label)("color",t.color)}}function pt(e,s){if(e&1&&(i(0,"option",29),r(1),n()),e&2){let t=s.$implicit;l("ngValue",t.id),m(),I(" ",t.prenom," ",t.nom," ")}}function dt(e,s){if(e&1&&(i(0,"option",29),r(1),n()),e&2){let t=s.$implicit;l("ngValue",t.id),m(),E(t.libelle)}}function ut(e,s){e&1&&(i(0,"div",28),r(1,"Le statut est obligatoire"),n())}function ft(e,s){if(e&1&&(i(0,"div"),c(1,ut,2,0,"div",27),n()),e&2){let t=S();m(),l("ngIf",t.statutFc==null||t.statutFc.errors==null?null:t.statutFc.errors.required)}}var Ot=(()=>{class e{constructor(t,o,a,C,it,nt,ot){this.consultationService=t,this.animalService=o,this.veterinarianService=a,this.surgeryService=C,this.router=it,this.dialogRef=nt,this.data=ot,this.myForm=new $({titre:new u("",[d.required]),statut:new u("",[d.required]),date:new u("",[d.required]),animal:new u("",[d.required]),typeOperation:new u("",[d.required]),veterinarian:new u("",[d.required]),comment:new u("",[d.required])}),this.types=[{id:1,libelle:"Chien"},{id:2,libelle:"Chat"},{id:3,libelle:"NAC"}],this.statuts=[{id:1,libelle:"Termin\xE9"},{id:2,libelle:"En attente"},{id:3,libelle:"Annul\xE9"}]}ngOnInit(){this.data?.id?this.loadPatientFormById(this.data.id).subscribe():this.myForm.patchValue({statut:2})}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}loadPatientFormById(t){return this.consultationService.findConsultationById(t).pipe(g(o=>{this.myForm.patchValue({titre:o.titre,statut:o.statut.id,date:o.date,animal:o.animal.id,typeOperation:o.typeOperation.id,veterinarian:o.veterinarian.id,comment:o.comment})}))}onSubmit(){let t=this.myForm.value;this.myForm.valid?this.consultationService.createConsultation(t).subscribe(()=>{this.router.navigate(["/consultation"])}):console.log("erreur, formulaire pas valid\xE9")}get titreFc(){return this.myForm.get("titre")}get ageFc(){return this.myForm.get("age")}get typeFc(){return this.myForm.get("type")}get statutFc(){return this.myForm.get("statut")}static{this.\u0275fac=function(o){return new(o||e)(p(X),p(tt),p(et),p(B),p(j),p(D),p(M))}}static{this.\u0275cmp=x({type:e,selectors:[["app-consultation-form"]],standalone:!0,features:[T],decls:58,vars:7,consts:[[3,"formGroup"],["mat-dialog-title",""],[1,"p-4"],[1,"d-flex","flex-row","mb-2"],[1,"form-group","w-50","me-2"],["for","nom"],[2,"color","red"],["type","text","id","titre","formControlName","titre",1,"form-control"],[4,"ngIf"],[1,"form-group","w-50"],["for","age"],["type","date","id","date","formControlName","date",1,"form-control"],["for","animal"],["formControlName","animal",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","typeOperation"],["formControlName","typeOperation",1,"form-select"],["for","veterinarian"],["formControlName","veterinarian",1,"form-select"],["for","statut"],["formControlName","statut",1,"form-select"],[1,"form-group"],["for","comment"],["id","comment","formControlName","comment","rows","3",1,"form-control"],[1,"d-flex","flex-row","justify-content-evenly"],[1,"cancel-button",3,"click"],[1,"d-flex","justify-content-center","align-items-center","btn","btn-success",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[3,"ngValue"],[3,"label","color"]],template:function(o,a){o&1&&(i(0,"form",0)(1,"h4",1),r(2,"Cr\xE9er une consultation"),n(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),r(7,"Titre"),i(8,"span",6),r(9,"*"),n()(),f(10,"input",7),c(11,mt,2,1,"div",8),n(),i(12,"div",9)(13,"label",10),r(14,"Date"),i(15,"span",6),r(16,"*"),n()(),f(17,"input",11),n()(),i(18,"div",3)(19,"div",4)(20,"label",12),r(21,"Animal"),i(22,"span",6),r(23,"*"),n()(),i(24,"select",13),c(25,st,2,2,"option",14),n()(),i(26,"div",9)(27,"label",15),r(28,"Type d'op\xE9ration"),i(29,"span",6),r(30,"*"),n()(),i(31,"select",16),c(32,ct,2,3,"option",14),n()()(),i(33,"div",3)(34,"div",4)(35,"label",17),r(36,"V\xE9t\xE9rinaire"),i(37,"span",6),r(38,"*"),n()(),i(39,"select",18),c(40,pt,2,3,"option",14),n()(),i(41,"div",9)(42,"label",19),r(43,"Statut"),i(44,"span",6),r(45,"*"),n()(),i(46,"select",20),c(47,dt,2,2,"option",14),n(),c(48,ft,2,1,"div",8),n()(),i(49,"div",21)(50,"label",22),r(51,"Commentaire"),n(),f(52,"textarea",23),n()()(),i(53,"mat-dialog-actions",24)(54,"button",25),F("click",function(){return a.cancel()}),r(55,"Annuler"),n(),i(56,"button",26),F("click",function(){return a.onSubmit()}),r(57," Ajouter une consultation "),n()()),o&2&&(l("formGroup",a.myForm),m(11),l("ngIf",a.titreFc==null?null:a.titreFc.touched),m(14),l("ngForOf",a.animalService.animaux()),m(7),l("ngForOf",a.consultationService.typeConsultations()),m(8),l("ngForOf",a.veterinarianService.vets()),m(7),l("ngForOf",a.statuts),m(),l("ngIf",a.statutFc==null?null:a.statutFc.touched))},dependencies:[K,H,z,J,G,W,R,P,Q,U,Z,O,w,N,k,q,L,Y],encapsulation:2})}}return e})();export{et as a,Ot as b};
