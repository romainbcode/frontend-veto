import{a as It,b as Vt,c as Nt,d as Rt,e as At,f as jt,g as Pt}from"./chunk-PNOTO6VG.js";import{a as kt}from"./chunk-NMOZKWR7.js";import{a as st,b as pt,c as dt,d as ut,e as ft,f as Ct,g as _t,h as gt,i as ht,j as vt,k as xt,l as yt,m as H,n as St}from"./chunk-2OGBMILO.js";import{a as ot,b as at,c as lt,d as rt,e as mt,f as ct,h as A,i as j,j as P}from"./chunk-SVYK7Y3U.js";import{a as B,b as q,e as W}from"./chunk-FKNELAXK.js";import"./chunk-Y2GOG3J7.js";import{a as $,b as G,c as L,d as bt,e as wt,f as O,g as Tt,h as Et,i as Mt,j as Dt,n as z,o as Ft}from"./chunk-JTMN6KQK.js";import{L as I,M as et,N as nt,O as V,P as it,Q as N,R,g as k}from"./chunk-DXO5SGBR.js";import{Gb as J,Hb as l,Ib as x,Jb as w,Kb as M,Mb as K,Nb as Q,Ob as X,Qb as v,Sa as a,Ta as h,ca as T,ha as g,jb as d,lb as m,mc as D,nc as Y,oc as Z,pa as S,pc as tt,qa as b,qb as n,qc as F,rb as i,sb as s,tb as C,ub as _,wb as E,yb as u,zb as f}from"./chunk-MAGLYOGK.js";var Ht=(()=>{class t{constructor(){this.dialogRef=T(I),this.faCheck=A}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}static{this.\u0275fac=function(c){return new(c||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-dialog-confirmation-validate"]],standalone:!0,features:[v],decls:11,vars:1,consts:[[1,"p-4"],[1,"d-flex","justify-content-center","fa-2xl","mb-3",2,"color","green",3,"icon"],["mat-dialog-title","",1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-evenly"],[1,"cancel-button",3,"click"],[1,"validate-button",3,"click"]],template:function(c,o){c&1&&(n(0,"div",0),s(1,"fa-icon",1),n(2,"h2",2),l(3,"Terminer la consultation"),i(),n(4,"mat-dialog-content",3),l(5," Veux-tu vraiment confirmer ce changement ? "),i(),n(6,"mat-dialog-actions",4)(7,"button",5),u("click",function(){return o.cancel()}),l(8,"Annuler"),i(),n(9,"button",6),u("click",function(){return o.confirm()}),l(10,"Confirmer"),i()()()),c&2&&(a(),m("icon",o.faCheck))},dependencies:[H,N,it,V,P,j],encapsulation:2,changeDetection:0})}}return t})();var $t=(()=>{class t{static{this.\u0275fac=function(c){return new(c||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-card-vet"]],inputs:{firstName:"firstName",lastName:"lastName"},standalone:!0,features:[v],decls:3,vars:2,consts:[[1,"fw-normal","mb-1"]],template:function(c,o){c&1&&(n(0,"div")(1,"div",0),l(2),i()()),c&2&&(a(2),M("",o.lastName," ",o.firstName,""))},encapsulation:2})}}return t})();function Wt(t,r){t&1&&(n(0,"div",21),l(1,"Le label est obligatoire"),i())}function Ut(t,r){if(t&1&&(n(0,"div"),d(1,Wt,2,0,"div",20),i()),t&2){let e=f();a(),m("ngIf",e.labelFc==null||e.labelFc.errors==null?null:e.labelFc.errors.required)}}function Jt(t,r){t&1&&(n(0,"div",21),l(1,"La couleur est obligatoire"),i())}function Kt(t,r){if(t&1&&(n(0,"div"),d(1,Jt,2,0,"div",20),i()),t&2){let e=f();a(),m("ngIf",e.colorFc==null||e.colorFc.errors==null?null:e.colorFc.errors.required)}}var Gt=(()=>{class t{constructor(e,c,o,p){this.consultationService=e,this.router=c,this.dialogRef=o,this.data=p,this.myForm=new wt({label:new O("",[G.required]),color:new O("",[G.required]),comment:new O("",[G.required])}),this.previewLabel="",this.previewColor="#000"}ngOnInit(){this.myForm.valueChanges.subscribe(e=>{this.previewLabel=e.label,this.previewColor=e.color})}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}onSubmit(){let e=this.myForm.value;this.myForm.valid?this.consultationService.createTypeConsultation(e).subscribe(()=>{this.router.navigate(["/consultation"])}):console.log("erreur, formulaire pas valid\xE9")}get labelFc(){return this.myForm.get("type")}get colorFc(){return this.myForm.get("color")}get commentFc(){return this.myForm.get("comment")}static{this.\u0275fac=function(c){return new(c||t)(h(B),h(k),h(I),h(et))}}static{this.\u0275cmp=g({type:t,selectors:[["app-consultation-form"]],standalone:!0,features:[v],decls:33,vars:5,consts:[[3,"formGroup"],["mat-dialog-title",""],[1,"p-4","d-flex","flex-column"],[1,"d-flex","flex-row"],[1,"form-group","w-75","me-2"],["for","nom"],[2,"color","red"],["type","text","id","label","formControlName","label",1,"form-control"],[4,"ngIf"],[1,"form-group","w-25"],["for","color"],["type","color","id","color","formControlName","color",1,"form-control"],[1,"form-group"],["for","comment"],["id","comment","formControlName","comment","rows","3",1,"form-control"],[1,"d-flex","justify-content-center"],[3,"label","color"],[1,"d-flex","flex-row","justify-content-evenly"],[1,"cancel-button",3,"click"],[1,"d-flex","justify-content-center","align-items-center","btn","btn-success",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(c,o){c&1&&(n(0,"form",0)(1,"h4",1),l(2,"Cr\xE9er un type de consultation"),i(),n(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),l(7,"Label"),n(8,"span",6),l(9,"*"),i()(),s(10,"input",7),d(11,Ut,2,1,"div",8),i(),n(12,"div",9)(13,"label",10),l(14,"Couleur"),n(15,"span",6),l(16,"*"),i()(),s(17,"input",11),d(18,Kt,2,1,"div",8),i()(),n(19,"div",12)(20,"label",13),l(21,"Commentaire"),i(),s(22,"textarea",14),i(),n(23,"div")(24,"span"),l(25,"Pr\xE9-visualisation"),i(),n(26,"div",15),s(27,"app-card-type-consultation",16),i()()()(),n(28,"mat-dialog-actions",17)(29,"button",18),u("click",function(){return o.cancel()}),l(30,"Annuler"),i(),n(31,"button",19),u("click",function(){return o.onSubmit()}),l(32," Ajouter un type de consultation "),i()()),c&2&&(m("formGroup",o.myForm),a(11),m("ngIf",o.labelFc==null?null:o.labelFc.touched),a(7),m("ngIf",o.colorFc==null?null:o.colorFc.touched),a(9),m("label",o.previewLabel)("color",o.previewColor))},dependencies:[z,Et,$,L,bt,Ft,Mt,Dt,F,D,R,V,N,q],encapsulation:2})}}return t})();function Qt(t,r){t&1&&(n(0,"th",36),l(1,"Statut"),i())}function Xt(t,r){if(t&1&&(n(0,"span",43),l(1),i()),t&2){let e=f().$implicit;a(),x(e.statut.libelle)}}function Yt(t,r){if(t&1&&(n(0,"span",44),l(1),i()),t&2){let e=f().$implicit;a(),x(e.statut.libelle)}}function Zt(t,r){if(t&1&&(n(0,"span",45),l(1),i()),t&2){let e=f().$implicit;a(),x(e.statut.libelle)}}function te(t,r){t&1&&(n(0,"span",46),l(1,"Inconnu"),i())}function ee(t,r){if(t&1&&(n(0,"td",37),C(1,38),d(2,Xt,2,1,"span",39)(3,Yt,2,1,"span",40)(4,Zt,2,1,"span",41)(5,te,2,0,"span",42),_(),i()),t&2){let e=r.$implicit;a(),m("ngSwitch",e.statut.id),a(),m("ngSwitchCase",1),a(),m("ngSwitchCase",2),a(),m("ngSwitchCase",3)}}function ne(t,r){t&1&&(n(0,"th",36),l(1,"Titre"),i())}function ie(t,r){if(t&1&&(n(0,"td",47),l(1),i()),t&2){let e=r.$implicit;a(),x(e.titre)}}function oe(t,r){t&1&&(n(0,"th",36),l(1,"Animal"),i())}function ae(t,r){t&1&&s(0,"img",52)}function le(t,r){t&1&&s(0,"img",53)}function re(t,r){t&1&&s(0,"img",54)}function me(t,r){t&1&&(n(0,"span"),l(1,"Autre"),i())}function ce(t,r){if(t&1&&(n(0,"td",47),C(1,38),d(2,ae,1,0,"img",48)(3,le,1,0,"img",49)(4,re,1,0,"img",50)(5,me,2,0,"span",51),_(),l(6),i()),t&2){let e=r.$implicit;a(),m("ngSwitch",e.animal.libelle),a(),m("ngSwitchCase","Chien"),a(),m("ngSwitchCase","Chat"),a(),m("ngSwitchCase","NAC"),a(2),w(" ",e.animal.nom," ")}}function se(t,r){t&1&&(n(0,"th",36),l(1,"Date"),i())}function pe(t,r){if(t&1&&(n(0,"td",47),l(1),i()),t&2){let e=r.$implicit;a(),w(" ",e.date,"")}}function de(t,r){t&1&&(n(0,"th",36),l(1,"Type d'op\xE9ration"),i())}function ue(t,r){if(t&1&&(n(0,"td",47),l(1),s(2,"app-card-type-consultation",55),i()),t&2){let e=r.$implicit;a(),M(" ",e.typeOperation.label,"",e.typeOperation.color," "),a(),m("label",e.typeOperation.label)("color",e.typeOperation.color)}}function fe(t,r){t&1&&(n(0,"th",36),l(1,"V\xE9t\xE9rinaire"),i())}function Ce(t,r){if(t&1&&(n(0,"td",47),s(1,"app-card-vet",56),i()),t&2){let e=r.$implicit;a(),m("firstName",e.veterinarian.prenom)("lastName",e.veterinarian.nom)}}function _e(t,r){t&1&&s(0,"th",57)}function ge(t,r){if(t&1){let e=E();n(0,"button",61),u("click",function(o){S(e);let p=f().$implicit;return f().completeConsultation(p.id),b(o.stopPropagation())}),s(1,"fa-icon",64),n(2,"span"),l(3,"Terminer la consultation"),i()()}if(t&2){let e=f(2);a(),m("icon",e.faCheck)}}function he(t,r){if(t&1){let e=E();n(0,"td",47)(1,"button",58),u("click",function(o){return S(e),b(o.stopPropagation())}),s(2,"fa-icon",59),i(),n(3,"mat-menu",null,0),d(5,ge,4,1,"button",60),n(6,"button",61),u("click",function(o){let p=S(e).$implicit;return f().deleteConsultation(p.id),b(o.stopPropagation())}),s(7,"fa-icon",62),n(8,"span"),l(9,"Supprimer"),i()(),n(10,"button",61),u("click",function(o){let p=S(e).$implicit;return f().editConsultation(p.id),b(o.stopPropagation())}),s(11,"fa-icon",63),n(12,"span"),l(13,"Modifier"),i()()()()}if(t&2){let e=r.$implicit,c=J(4),o=f();a(),m("matMenuTriggerFor",c),a(),m("icon",o.faEllipsisVertical),a(3),m("ngIf",e.statut.id!==1),a(2),m("icon",o.faTrash),a(4),m("icon",o.faEdit)}}function ve(t,r){t&1&&s(0,"tr",65)}function xe(t,r){if(t&1){let e=E();n(0,"tr",66),u("click",function(){let o=S(e).$implicit,p=f();return b(p.showConsultation(o.id))}),i()}}var ln=(()=>{class t{constructor(e,c){this.consultationService=e,this.router=c,this.dialog=T(nt),this.faTrash=at,this.faEdit=ot,this.faCheck=A,this.faHourglass=lt,this.faPlus=ct,this.faEllipsisVertical=rt,this.faMagnifyingGlass=mt,this.displayedColumns=["Statut","Titre","Date","Animal","Veterinaire","TypeOperation","Actions"],this.searchTerm=""}filterConsultations(){this.consultationService.findConsultationWithFilter(this.searchTerm)}deleteConsultation(e){this.dialog.open(St,{width:"500px"}).afterClosed().subscribe(o=>{o&&this.consultationService.deleteConsultationById(e).subscribe()})}createTypeConsultation(){this.dialog.open(Gt,{width:"500px"})}createConsultation(){this.dialog.open(W,{width:"500px"})}editConsultation(e){this.dialog.open(W,{width:"500px",data:{id:e}})}showConsultation(e){this.dialog.open(kt,{width:"500px",data:{id:e}})}completeConsultation(e){this.dialog.open(Ht,{width:"500px"}).afterClosed().subscribe(o=>{o&&this.consultationService.completeConsultationById(e).subscribe()})}get consultationsFinishedCount(){return this.consultationService.consultations().filter(e=>e.statut.id===1).length}get consultationsPendingCount(){return this.consultationService.consultations().filter(e=>e.statut.id===2).length}static{this.\u0275fac=function(c){return new(c||t)(h(B),h(k))}}static{this.\u0275cmp=g({type:t,selectors:[["app-consultation"]],standalone:!0,features:[v],decls:58,vars:13,consts:[["menu","matMenu"],[1,"p-3"],[1,"d-flex","justify-content-center","mb-4"],[1,"border","rounded","d-inline-flex","me-5"],[1,"d-flex","align-items-center","px-4","py-2"],[1,"py-2","px-3","rounded","me-4",2,"background-color","#d8ffd9"],[1,"fa-2xl",2,"color","green",3,"icon"],[1,"d-flex","flex-column","justify-content-center"],[1,"fw-light","m-0","p-0","text-center",2,"font-size","14px"],[1,"fs-2","fw-bold","m-0","p-0"],[1,"border","rounded","d-inline-flex"],[1,"py-2","px-3","rounded","me-4",2,"background-color","#ededed"],[1,"fa-2xl",2,"color","grey",3,"icon"],[1,"d-flex","justify-content-end","align-items-center"],[1,"d-flex","align-items-center","input-group","me-2",2,"width","20%"],[1,"input-group-prepend"],[1,"input-group-text"],[3,"icon"],["type","text","placeholder","Rechercher...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-dark","me-2",3,"click"],[1,"me-2",3,"icon"],[1,"btn","btn-dark",3,"click"],["mat-table","","matSort","",2,"table-layout","auto","width","100%",3,"dataSource"],["matColumnDef","Statut"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","width: 7rem;",4,"matCellDef"],["matColumnDef","Titre"],["mat-cell","",4,"matCellDef"],["matColumnDef","Animal"],["matColumnDef","Date"],["matColumnDef","TypeOperation"],["matColumnDef","Veterinaire"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"width","7rem"],[3,"ngSwitch"],["class","badge bg-success d-inline","style","font-size: 13px;",4,"ngSwitchCase"],["class","badge bg-secondary d-inline","style","font-size: 13px;",4,"ngSwitchCase"],["class","badge bg-danger d-inline","style","font-size: 13px;",4,"ngSwitchCase"],["class","badge inconnu",4,"ngSwitchDefault"],[1,"badge","bg-success","d-inline",2,"font-size","13px"],[1,"badge","bg-secondary","d-inline",2,"font-size","13px"],[1,"badge","bg-danger","d-inline",2,"font-size","13px"],[1,"badge","inconnu"],["mat-cell",""],["src","./assets/tete-de-chien.png","alt","Chien","class","img-logo",4,"ngSwitchCase"],["src","./assets/tete-de-chat.png","alt","Chat","class","img-logo",4,"ngSwitchCase"],["src","./assets/cameleon.png","alt","NAC","class","img-logo",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","./assets/tete-de-chien.png","alt","Chien",1,"img-logo"],["src","./assets/tete-de-chat.png","alt","Chat",1,"img-logo"],["src","./assets/cameleon.png","alt","NAC",1,"img-logo"],[3,"label","color"],[3,"firstName","lastName"],["mat-header-cell",""],["mat-button","",3,"click","matMenuTriggerFor"],[2,"color","black",3,"icon"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"me-2",2,"color","red",3,"icon"],[1,"me-2",2,"color","blue",3,"icon"],[1,"me-2",2,"color","green",3,"icon"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(c,o){c&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),s(5,"fa-icon",6),i(),n(6,"div",7)(7,"p",8),l(8),i(),n(9,"p",9),l(10),i()()()(),n(11,"div",10)(12,"div",4)(13,"div",11),s(14,"fa-icon",12),i(),n(15,"div",7)(16,"p",8),l(17),i(),n(18,"p",9),l(19),i()()()()(),n(20,"div",13)(21,"div",14)(22,"div",15)(23,"span",16),s(24,"fa-icon",17),i()(),n(25,"input",18),X("ngModelChange",function(y){return Q(o.searchTerm,y)||(o.searchTerm=y),y}),u("ngModelChange",function(){return o.filterConsultations()}),i()(),n(26,"button",19),u("click",function(){return o.createTypeConsultation()}),s(27,"fa-icon",20),n(28,"span"),l(29,"Ajouter un type de consultation"),i()(),n(30,"button",21),u("click",function(){return o.createConsultation()}),s(31,"fa-icon",20),n(32,"span"),l(33,"Ajouter une consultation"),i()()(),n(34,"table",22),C(35,23),d(36,Qt,2,0,"th",24)(37,ee,6,4,"td",25),_(),C(38,26),d(39,ne,2,0,"th",24)(40,ie,2,1,"td",27),_(),C(41,28),d(42,oe,2,0,"th",24)(43,ce,7,5,"td",27),_(),C(44,29),d(45,se,2,0,"th",24)(46,pe,2,1,"td",27),_(),C(47,30),d(48,de,2,0,"th",24)(49,ue,3,4,"td",27),_(),C(50,31),d(51,fe,2,0,"th",24)(52,Ce,2,2,"td",27),_(),C(53,32),d(54,_e,1,0,"th",33)(55,he,14,5,"td",27),_(),d(56,ve,1,0,"tr",34)(57,xe,1,0,"tr",35),i()()),c&2&&(a(5),m("icon",o.faCheck),a(3),w("Consultation ",o.consultationsFinishedCount>1?"termin\xE9es":"termin\xE9e",""),a(2),x(o.consultationsFinishedCount),a(4),m("icon",o.faHourglass),a(3),w("Consultation ",o.consultationsPendingCount>1?"en attentes":"en attente",""),a(2),x(o.consultationsPendingCount),a(5),m("icon",o.faMagnifyingGlass),a(),K("ngModel",o.searchTerm),a(2),m("icon",o.faPlus),a(4),m("icon",o.faPlus),a(3),m("dataSource",o.consultationService.consultations()),a(22),m("matHeaderRowDef",o.displayedColumns),a(),m("matRowDefColumns",o.displayedColumns))},dependencies:[xt,st,dt,_t,ut,pt,gt,ft,Ct,ht,vt,F,D,Y,Z,tt,P,j,Rt,Vt,It,Nt,H,yt,R,z,$,L,Tt,Pt,At,jt,$t,q],encapsulation:2})}}return t})();export{ln as ConsultationComponent};
